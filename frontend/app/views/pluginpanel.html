<div layout="column" class="pluginpanel">
   <div class="pluginpanel-header">
      <h2 class="plugin-name">{{plugin.card.name}}</h2>
      <h2 class="panel-title">Plugin Panel</h2>
   </div>

   <form class="plugin-settings" ng-submit="updateSettings()">
      <div class="summary">
         <h3>Summary</h3>
         <md-content>
            <ul>
               <li class="xml_state">
                  <label>XML State</label>
                  <span ng-class="(plugin.card.xml_state != 'passing')?'error':''">{{plugin.card.xml_state}}</span>
               </li>
               <li class="tags-container">
                  <label>{{'TAGGED'|translate}}</label>
                  <span class="tags">
                     <span ng-repeat="tag in plugin.card.tags">{{tag.tag}} [{{tag.lang}}]</span>
                  </span>
               </li>
               <li>
                  <label>{{'DOWNLOADED'|translate}}</label>
                  <span>94800 times</span>
               </li>
               <li>
                  <label>Contributors (Listed in the XML File)</label>
                  <span>
                     <ul>
                        <li ng-repeat="author in plugin.card.authors">{{author.name}} {{(author_id == author.id) ? '( You )' : ''}}</li>
                     </ul>
                  </span>
               </li>

               <!--
               <li>
                  <label>{{'DOWNLOADED'|translate}} ({{'THIS_MONTH'|translate}})</label>
                  <span>224 times</span>
               </li>
               <li>
                  <label>{{'DOWNLOADED'|translate}} ({{'THIS_WEEK'|translate}})</label>
                  <span>80 times</span>
               </li>
               -->
            </ul>
         </md-content>
      </div>

      <div class="plugin-settings">
         <h3>Settings</h3>
         <md-input-container>
            <label>Authoritative Plugin Meta-Description File URL (XML File)</label>
            <input type="text" ng-model="plugin.card.xml_url">
         </md-input-container>
      </div>

      <div class="actions">
         <h3>Actions</h3>      
         <md-list class="actions" layout="row">
            <md-list-item class="refresh_xml-button">
               <i class="fa fa-spinner"></i>
               <md-button class="md-raised md-primary" type="button" ng-click="refreshXMLFile($event)" ng-show="rights.admin || rights.allowed_refresh_xml">
                  Refresh XML File
               </md-button>
            </md-list-item>
            <md-list-item>
               <md-button class="md-raised md-primary" type="button" ng-click="showUserPermissionsDialog($event)" ng-show="rights.admin">
                  Manage User Permissions
               </md-button>
            </md-list-item>
         </md-list>
      </div>

      <md-content class="xml-errors">
         <md-list>
            <md-list-item ng-repeat="error in xml_errors" layout="column">
               <div class="reason">
                     <span class="reason" ng-show="error.args.reason == 'url'">{{'XMLFILE_UNREACHABLE_URL'|translate}}</span>
                     <span class="reason" ng-show="error.args.reason == 'parse'">{{'XMLFILE_PARSE_ERROR'|translate}}</span>
                     <span class="reason" ng-show="error.args.reason == 'field'">{{'XMLFILE_SPECIFICATION_ERROR'|translate}}</span>
               </div>

               <div class="separator"></div>

               <div class="details">
                  <ul>
                     <!-- Details for URL errors -->
                     <li ng-show="error.args.reason == 'url'">The url {{error.args.url}} is not reachable.</li>

                     <!-- Details for php/simplexml Parse errors -->
                     <li ng-show="error.args.reason == 'parse'">Line {{error.args.line}}</li>
                     <li ng-show="error.args.reason == 'parse'">{{error.args.errstring}}</li>


                     <!-- Details for GLPi XML Plugin Description File Specification Errors -->
                     <li ng-show="error.args.reason == 'field'">The field "{{error.args.field}}" fails to respect specification</li>
                     <li ng-show="error.args.reason == 'field'">{{error.args.errstring}}</li>
                  </ul>
               </div>
            </md-list-item>
         </md-list>
      </md-content>

      <md-button class="the-submit md-raised md-primary" type="submit">Save</md-button>
   </form>
</div>